"use strict";(function(a){if(typeof define==="function"&&define.amd){define(a);}else{window.DataBind=a();}})(function(){var k=(function(){var U={noMore:false},P=[];var G=function(ae){var af={};return ae&&af.toString.call(ae)=="[object Function]";};var L=function(ae){return ae%1===0;};var S=function(ae){return Object.prototype.toString.call(ae)==="[object Array]";};var J=function(af,ae){var aj=[],ai=[];if(!(typeof af=="string")&&!(typeof ae=="string")&&!S(af)&&!S(ae)){for(var ah in af){if(!ae[ah]){aj.push(ah);}}for(var ag in ae){if(!af[ag]){ai.push(ag);}}}return{added:aj,removed:ai};};var Z=function(af){if(null==af||"object"!=typeof af){return af;}var ag=af.constructor();for(var ae in af){ag[ae]=af[ae];}return ag;};var W=function(ah,ag,ae,aj){try{Object.defineProperty(ah,ag,{get:ae,set:aj,enumerable:true,configurable:true});}catch(af){try{Object.prototype.__defineGetter__.call(ah,ag,ae);Object.prototype.__defineSetter__.call(ah,ag,aj);}catch(ai){throw"watchJS error: browser not supported :/";}}};var N=function(ah,ag,af){try{Object.defineProperty(ah,ag,{enumerable:false,configurable:true,writable:false,value:af});}catch(ae){ah[ag]=af;}};var V=function(){if(G(arguments[1])){Q.apply(this,arguments);}else{if(S(arguments[1])){R.apply(this,arguments);}else{ad.apply(this,arguments);}}};var Q=function(ai,ae,ak,ah){if((typeof ai=="string")||(!(ai instanceof Object)&&!S(ai))){return;}var ag=[];if(S(ai)){for(var aj=0;aj<ai.length;aj++){ag.push(aj);}}else{for(var af in ai){ag.push(af);}}R(ai,ag,ae,ak,ah);};var R=function(ah,ag,ae,aj,af){if((typeof ah=="string")||(!(ah instanceof Object)&&!S(ah))){return;}for(var ai in ag){ad(ah,ag[ai],ae,aj,af);}};var ad=function(ag,ai,ae,ah,af){if((typeof ag=="string")||(!(ag instanceof Object)&&!S(ag))){return;}if(G(ag[ai])){return;}if(ag[ai]!=null&&(ah===undefined||ah>0)){if(ah!==undefined){ah--;}Q(ag[ai],ae,ah);}X(ag,ai,ae);if(af){ac(ag,ai,ae,ah);}};var T=function(){if(G(arguments[1])){K.apply(this,arguments);}else{if(S(arguments[1])){O.apply(this,arguments);}else{Y.apply(this,arguments);}}};var K=function(ah,ae){if(ah instanceof String||(!(ah instanceof Object)&&!S(ah))){return;}var ag=[];if(S(ah)){for(var ai=0;ai<ah.length;ai++){ag.push(ai);}}else{for(var af in ah){ag.push(af);}}O(ah,ag,ae);};var O=function(ah,ag,ae){for(var af in ag){Y(ah,ag[af],ae);}};var X=function(ah,ak,af){var ai=ah[ak];I(ah,ak);if(!ah.watchers){N(ah,"watchers",{});}if(!ah.watchers[ak]){ah.watchers[ak]=[];}for(var ag in ah.watchers[ak]){if(ah.watchers[ak][ag]===af){return;}}ah.watchers[ak].push(af);var ae=function(){return ai;};var aj=function(am){var al=ai;ai=am;if(ah[ak]){Q(ah[ak],af);}I(ah,ak);if(!U.noMore){if(JSON.stringify(al)!==JSON.stringify(am)){H(ah,ak,"set",am,al);U.noMore=false;}}};W(ah,ak,ae,aj);};var H=function(ai,aj,ah,ag,af){for(var ae in ai.watchers[aj]){if(L(ae)){ai.watchers[aj][ae].call(ai,aj,ah,ag,af);}}};var M=["pop","push","reverse","shift","sort","slice","unshift"];var F=function(ag,ah,af,ae){N(ag[ah],ae,function(){var ai=af.apply(ag[ah],arguments);ad(ag,ag[ah]);if(ae!=="slice"){H(ag,ah,ae,arguments);}return ai;});};var I=function(ag,ah){if((!ag[ah])||(ag[ah] instanceof String)||(!S(ag[ah]))){return;}for(var af=M.length,ae;af--;){ae=M[af];F(ag,ah,ag[ah][ae],ae);}};var Y=function(ah,ai,af){for(var ag in ah.watchers[ai]){var ae=ah.watchers[ai][ag];if(ae==af){ah.watchers[ai].splice(ag,1);}}ab(ah,ai,af);};var aa=function(){for(var ag in P){var ae=P[ag];var ah=J(ae.obj[ae.prop],ae.actual);if(ah.added.length||ah.removed.length){if(ah.added.length){for(var af in ae.obj.watchers[ae.prop]){R(ae.obj[ae.prop],ah.added,ae.obj.watchers[ae.prop][af],ae.level-1,true);}}H(ae.obj,ae.prop,"differentattr",ah,ae.actual);}ae.actual=Z(ae.obj[ae.prop]);}};var ac=function(af,ah,ae,ag){P.push({obj:af,prop:ah,actual:Z(af[ah]),watcher:ae,level:ag});};var ab=function(ah,ai,af){for(var ag in P){var ae=P[ag];if(ae.obj==ah&&ae.prop==ai&&ae.watcher==af){P.splice(ag,1);}}};setInterval(aa,50);U.watch=V;U.unwatch=T;U.callWatchers=H;return U;})();var B={};var b="databind-model-change";var n="databind-dom-change";var A="data-key";function u(F){return(F&&window.jQuery&&F instanceof window.jQuery);}function g(F){if(u(F)){return F[0];}return F;}function s(L,I){if(!L){return undefined;}var M=(I!==undefined);if(["checkbox","radio"].indexOf(L.type)>=0){if(M){L.checked=!!I;}return L.checked;}if(["text","textarea","select-one"].indexOf(L.type)>=0){if(M){L.value=I;}return L.value;}if(["select-multiple"].indexOf(L.type)>=0){if(M){if(!j(I)){I=[I];}}var G=[];var H=L&&L.options;var K;for(var J=0,F=H.length;J<F;J++){K=H[J];if(M){if(I.indexOf(K.value)>-1){K.selected=true;}else{K.selected=false;}}if(K.selected){G.push(K.value||K.text);}}return G;}if(M){L.innerText=I;}return L.innerText;}function j(F){return(Object.prototype.toString.call(F)==="[object Array]");}function z(F){if(["checkbox","radio","select-one","select-multiple"].indexOf(F.type)>=0){return"change";}if(["text","textarea"].indexOf(F.type)>=0){return"input";}}function a(F){if(!F.hashkey){F.hashkey=Date.now()+Math.floor(Math.random()*100000);}return F.hashkey;}function h(H,G){if(!H||!G){return;}var I=a(H);B[I]=B[I]||[];if(B[I].indexOf(G)>-1){return;}B[I].push(G);var F=z(H);H.addEventListener(F,G,false);}function f(I,H){var J=a(I);var F=B[J].indexOf(H);if(!B[J]||F===-1){return;}B[J].splice(F,1);var G=z(I);I.removeEventListener(G,H,false);}function c(J){var K=a(J);var I=B[K];if(!J||!I){return;}var H=I.concat();var G,F=H.length;for(G=0;G<F;G++){f(J,H[G]);}}function d(F,I){var J=I.split(".");var H=F;var G;for(G=0;G<J.length;G++){if(!H.hasOwnProperty(J[G])){return false;}H=H[J[G]];}return true;}function q(F,I){var J=I.split(".");var H=F;var G;for(G=0;G<J.length-1;G++){H=H[J[G]];}return H;}function p(H,I,G){var J=I.split(".");var F=q(H,I);if(G!==undefined){F[J[J.length-1]]=G;}return F[J[J.length-1]];}function i(I,G,F){var H=(function(M,K,J,L,N,Q,P,O){return function(U){var S=N(this);var T=Q(this);var R=L(K,J);L(K,J,S);P(O,this,{key:T,oldValue:R,newValue:S});};})(I,G,F,p,s,l,D,n);h(I,H);}function o(F){c(F);}function r(I,G,F){var H=(function(M,L,K,N,P,O,J){return function(S,T,R,Q){var S=O(M);N(M,R);P(J,M,{key:S,oldValue:Q,newValue:R});};})(I,G,F,s,D,l,b);k.watch(G,F,H);}function m(G,F){var I=G.watchers[F];var H;for(H=0;H<I.length;H++){k.unwatch(G,F,I[H]);}}function l(F){if(!F){return;}return F.getAttribute(A);}function y(F){F=F||{};F={dom:(F.dom!==undefined)?F.dom:true,model:(F.model!==undefined)?F.model:true,children:(F.children!==undefined)?F.children:true};return F;}function x(J,H){if(!J||!H){return{};}var I=l(J);if(!I){return{};}var K=d(H,I);var G=q(H,I);var F=I.split(".");F=F[F.length-1];return{key:I,deepKey:F,deepModel:G,keyExists:K};}function E(I,G,F){if(!I||!G){return false;}var H=x(I,G);if(!H.keyExists){return false;}var J=p(G,H.key);s(I,J);if(F.dom){i(I,H.deepModel,H.deepKey);}if(F.model){r(I,H.deepModel,H.deepKey);}return true;}function t(I,G,F){if(!I||!G){return;}var H=x(I,G);if(!H.keyExists){return;}if(F.dom){o(I);}if(F.model){m(H.deepModel,H.deepKey);}}function w(J,F){var I=[J],H,G;if(F.children){H=J.getElementsByTagName("*");for(G=0;G<H.length;G++){I.push(H[G]);}}return I;}function D(G,H,I){var F=document.createEvent("Events");F.initEvent(G,true,true);F.data=I;H.dispatchEvent(F);}function v(I,O,J,K){var G=[];function F(Q,P){G.push(P);if(K.dom){Q.addEventListener(J,P,false);}if(K.model){Q.addEventListener(O,P,false);}}function N(R,Q){var P=G.indexOf(Q);if(P===-1){return;}G.splice(P,1);if(K.dom){R.removeEventListener(n,Q,false);}if(K.model){R.removeEventListener(b,Q,false);}}function H(R){var Q,P=G.concat();for(Q=0;Q<P.length;Q++){N(R,P[Q]);}}function L(Q){var P;for(P=0;P<I.length;P++){F(I[P],Q);}}function M(Q){var P,R=N;if(Q===undefined){R=H;}for(P=0;P<I.length;P++){R(I[P],Q);}}return{watch:L,unwatch:M};}function C(H,K,L){if(!H||!K){return;}var G=g(H);if(G!==H){arguments[0]=G;return C.apply(this,arguments);}L=y(L);var M=w(H,L);var J;var N,F=[];for(J=0;J<M.length;J++){N=E(M[J],K,{dom:L.dom,model:L.model});if(N){F.push(M[J]);}}var I=new v(F,b,n,L);H.watchable=I;return I;}function e(J,H,F){if(!J||!H){return;}var K=g(J);if(K!==J){arguments[0]=K;return e.apply(this,arguments);}F=y(F);var G=w(J,F);var I;for(I=0;I<G.length;I++){t(G[I],H,{dom:F.dom,model:F.model});}J.watchable.unwatch();}return{bind:C,unbind:e};});